jQuery.notification=function(e,i){"use strict";var o=function(){if(i.Notification&&(i.Notification.permissionLevel||i.Notification.permission))return i.Notification;var o=i.webkitNotifications;if(!o)return function(){var i={};return i.permission="unsupported",i.permissionLevel=function(){return"unsupported"},i.requestPermission=e.noop,i}();var n=["granted","default","denied"],r=function(i,n){if(n=n||{},i){var t=o.createNotification(n.iconUrl||"",i,n.body||"");return t.titleDir=n.titleDir||"auto",t.body=n.body||"",t.bodyDir=n.bodyDir||"auto",t.tag=n.tag||"",t.replaceId=n.tag||"",t.iconUrl=n.iconUrl||"",t.onclick=n.onclick||e.noop,t.onshow=n.onshow||e.noop,t.onerror=n.onerror||e.noop,t.onclose=n.onclose||e.noop,t.close=function(){t.cancel()},"granted"===r.permissionLevel()&&t.show(),t}};return r.permissionLevel=function(){return r.permission=n[o.checkPermission()]},r.permissionLevel(),r.requestPermission=function(e){if("default"!==r.permissionLevel())return void e();if(o.requestPermission.length)return void o.requestPermission(function(){r.permissionLevel(),e()});o.requestPermission();var n=i.setInterval(function(){var o=r.permissionLevel();"default"!==o&&(i.clearInterval(n),e())},200)},r}(),n=function(i){return"default"!==(o.permission||o.permissionLevel())?void i():void e(document).one("click",function(){o.requestPermission(i)})},r=function(i){var r=e.Deferred();if(!o.prototype)return r.reject("unsupported"),r.promise();"string"==typeof i&&(i={title:i}),i=i||{},i.autoclose="undefined"==typeof i.autoclose?!0:i.autoclose,i.timeout=i.timeout||1/0;var t=i.iconUrl||i.icon;return t&&(i.icon=t),n(function(){var e=o.permission||o.permissionLevel();if("granted"!==e)return void r.reject(e);var n=new o(i.title,i);isFinite(i.timeout)&&n.addEventListener("show",function(){setTimeout(function(){n.close()},i.timeout)},!1),i.autoclose&&n.addEventListener("click",function(){n.close()},!1),r.resolve(n)}),r.promise()};return r.permission=o.permission,r.permissionLevel=o.permissionLevel||function(){return o.permission},r.requestPermission=n,r}(jQuery,window);